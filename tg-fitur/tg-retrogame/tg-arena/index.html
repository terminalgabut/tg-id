<!DOCTYPE html><html lang="id">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Arena Survival | Terminal Gabut</title>  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">  
  <script src="https://cdn.tailwindcss.com"></script>  
</head>  
<body class="bg-gray-100 flex flex-col min-h-screen">    <!-- NAVBAR -->    <header class="bg-blue-600 text-white fixed top-0 left-0 w-full shadow-md z-50">  
    <nav class="flex justify-between items-center bg-blue-600 text-white px-6 py-4 shadow-md">  
      <div>  
        <a href="../index.html">  
          <img src="IMG_20250825_090756-removebg-preview.png" alt="Terminal Gabut Logo" class="h-7 w-auto">  
        </a>  
      </div>  
      <ul class="hidden md:flex gap-6">  
        <li><a href="../index.html" class="hover:text-blue-200">Home</a></li>  
        <li><a href="#" class="hover:text-blue-200">Fitur</a></li>  
      </ul>  
      <button id="darkToggle" class="bg-white text-blue-600 px-3 py-1 rounded-md hover:bg-gray-200">üåô</button>  
    </nav>  
  </header>    <!-- CONTAINER -->    <div class="chat-container w-11/12 max-w-4xl mx-auto flex flex-col bg-white rounded-xl shadow-md mt-24 overflow-hidden">  <!-- HEADER: Score/Lives/Wave/Power -->  
<div class="header-container bg-blue-600 text-white flex justify-around p-4">  
  <div><strong>Score:</strong> <span id="score">0</span></div>  
  <div><strong>Lives:</strong> <span id="lives">3</span></div>  
  <div><strong>Wave:</strong> <span id="wave">1</span></div>  
  <div><strong>Power:</strong> <span id="power">1</span></div>  
</div>  

<!-- GAME AREA -->
<div class="messages flex items-center justify-center bg-gray-50" style="height:600px">  
  <canvas id="c" class="bg-black rounded border-2 border-blue-500" width="800" height="420"></canvas>  
</div>  

<!-- GAMEPAD -->  
<div class="input-container flex flex-col items-center bg-white p-4 gap-3">  
  <div class="flex justify-center gap-6">  
    <button class="px-4 py-2 bg-blue-600 text-white rounded" onclick="keys['arrowleft']=true;setTimeout(()=>keys['arrowleft']=false,200)">&#9664;</button>  
    <button class="px-4 py-2 bg-blue-600 text-white rounded" onclick="keys['arrowup']=true;setTimeout(()=>keys['arrowup']=false,200)">&#9650;</button>  
    <button class="px-4 py-2 bg-blue-600 text-white rounded" onclick="keys['arrowdown']=true;setTimeout(()=>keys['arrowdown']=false,200)">&#9660;</button>  
    <button class="px-4 py-2 bg-blue-600 text-white rounded" onclick="keys['arrowright']=true;setTimeout(()=>keys['arrowright']=false,200)">&#9654;</button>  
  </div>  
  <div class="flex gap-6">  
    <button class="px-6 py-2 bg-green-500 text-white rounded" onclick="game.start()" id="startBtn">‚ñ∂ Start Game</button>  
    <button class="px-6 py-2 bg-orange-500 text-white rounded" onclick="game.playerAttack()">‚öîÔ∏è Attack (Z)</button>  
    <button class="px-6 py-2 bg-red-500 text-white rounded" onclick="game.playerDash()">üí® Skill (X)</button>  
  </div>  
</div>

  </div>   
 <footer class="text-center py-6 text-gray-500">¬© 2025 Terminal Gabut - Semua Hak Dilindungi</footer>
<script>
// === SCRIPT ARENA SURVIVAL ===

// Global references
window.keys = {};
window.game = null;

// Input handler
window.addEventListener('keydown', e => {
  keys[e.key.toLowerCase()] = true;
  if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)) e.preventDefault();
});
window.addEventListener('keyup', e => { keys[e.key.toLowerCase()] = false; });

// Utility
function clamp(v,a,b){return Math.max(a,Math.min(b,v));}
function rnd(a,b){return Math.random()*(b-a)+a}

// Player class
class Player {
  constructor(x,y){
    this.x=x;this.y=y;this.radius=12;this.speed=160;
    this.hp=3;this.inv=false;this.invTimer=0;
    this.attackCooldown=0;this.dashCooldown=0;
    this.power=1;this.score=0;
  }
  update(dt){
    let vx=0,vy=0;
    if(keys['arrowleft']||keys['a']) vx=-1;
    if(keys['arrowright']||keys['d']) vx=1;
    if(keys['arrowup']||keys['w']) vy=-1;
    if(keys['arrowdown']||keys['s']) vy=1;
    if(vx||vy){
      const len=Math.hypot(vx,vy)||1;vx/=len;vy/=len;
      this.x+=vx*this.speed*dt;this.y+=vy*this.speed*dt;
      this.x=clamp(this.x,20,c.width-20);
      this.y=clamp(this.y,60,c.height-20);
    }
    if(this.invTimer>0){this.invTimer-=dt;if(this.invTimer<=0)this.inv=false;}
    this.attackCooldown=Math.max(0,this.attackCooldown-dt);
    this.dashCooldown=Math.max(0,this.dashCooldown-dt);
  }
  render(ctx){
    ctx.fillStyle='#fff';
    ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);ctx.fill();
  }
  attack(){
    if(this.attackCooldown>0) return null;
    this.attackCooldown=0.35;
    return {x:this.x,y:this.y,range:32+this.power*6,damage:1+Math.floor(this.power/1.5)};
  }
  dash(){
    if(this.dashCooldown>0) return false;
    this.dashCooldown=2.5;
    this.inv=true;this.invTimer=0.25;
    let dx=0,dy=0;
    if(keys['arrowleft']||keys['a']) dx=-1;
    if(keys['arrowright']||keys['d']) dx=1;
    if(keys['arrowup']||keys['w']) dy=-1;
    if(keys['arrowdown']||keys['s']) dy=1;
    if(dx||dy){
      const len=Math.hypot(dx,dy)||1;dx/=len;dy/=len;
      this.x=clamp(this.x+dx*80,20,c.width-20);
      this.y=clamp(this.y+dy*80,60,c.height-20);
    }
    return true;
  }
}

// Enemy & Boss
class Enemy {
  constructor(x,y,hp,spd,type='soldier'){
    this.x=x;this.y=y;this.hp=hp;this.maxhp=hp;this.spd=spd;this.type=type;
    this.alive=true;this.radius=10;this.retarget=0;this.dirx=0;this.diry=0;
  }
  update(dt,player){
    if(!this.alive)return;
    this.retarget-=dt;
    if(this.retarget<=0){
      this.retarget=rnd(0.4,1.2);
      const angle=Math.atan2(player.y-this.y,player.x-this.x)+rnd(-0.5,0.5);
      this.dirx=Math.cos(angle);this.diry=Math.sin(angle);
    }
    this.x+=this.dirx*this.spd*dt;this.y+=this.diry*this.spd*dt;
    this.x=clamp(this.x,20,c.width-20);this.y=clamp(this.y,60,c.height-20);
  }
  render(ctx){
    if(!this.alive)return;
    ctx.fillStyle='#bbb';
    ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);ctx.fill();
  }
}
class Boss extends Enemy{
  constructor(x,y,wave){
    super(x,y,15+wave*8,30+wave*4,'boss');
    this.radius=18;this.wave=wave;this.phase=0;this.attackTimer=0;
  }
  update(dt,player){
    this.attackTimer-=dt;
    if(this.wave%3===1){
      if(this.attackTimer<=0){this.attackTimer=1.8;
        const ang=Math.atan2(player.y-this.y,player.x-this.x);
        this.dirx=Math.cos(ang);this.diry=Math.sin(ang);
        this.x+=this.dirx*60;this.y+=this.diry*60;}
    } else if(this.wave%3===2){
      if(this.attackTimer<=0){this.attackTimer=0.9;this.dirx=rnd(-1,1);this.diry=rnd(-1,1);}
      this.x+=this.dirx*this.spd*dt*1.2;this.y+=this.diry*this.spd*dt*1.2;
    } else {
      this.phase+=dt;
      this.x+=Math.cos(this.phase)*10*dt*60;this.y+=Math.sin(this.phase)*6*dt*60;
    }
    this.x=clamp(this.x,20,c.width-20);this.y=clamp(this.y,60,c.height-20);
  }
}

// Game
class Game{
  constructor(){
    this.player=new Player(c.width/2,c.height/2);
    this.enemies=[];this.boss=null;
    this.wave=1;this.lives=3;this.score=0;
    this.playing=false;this.paused=false;
    this.spawnTimer=0;this.enemyCount=0;
    this.attackHits=[];this.lastTime=performance.now();
  }
  start(){if(this.playing)return;this.reset();this.playing=true;this.paused=false;this.loop();}
  reset(){this.player=new Player(c.width/2,c.height/2);
    this.enemies=[];this.boss=null;this.wave=1;this.lives=3;this.score=0;this.enemyCount=0;
    updateHUD();}
  loop(){if(!this.playing)return;const now=performance.now();const dt=(now-this.lastTime)/1000;this.lastTime=now;
    if(!this.paused){this.update(dt);this.render();}requestAnimationFrame(()=>this.loop());}
  update(dt){
    this.player.update(dt);
    if(!this.boss&&this.enemyCount<10){
      this.spawnTimer-=dt;
      if(this.spawnTimer<=0){
        this.spawnTimer=0.4;
        this.enemies.push(new Enemy(rnd(40,c.width-40),rnd(80,c.height-40),1+this.wave*0.6,30+this.wave*6));
        this.enemyCount++;
      }
    }
    if(this.enemyCount>=10&&!this.boss&&this.enemies.filter(e=>e.alive).length===0){
      this.boss=new Boss(c.width/2,90,this.wave);
    }
    this.enemies.forEach(e=>e.update(dt,this.player));
    if(this.boss) this.boss.update(dt,this.player);
    // attacks
    if(this.attackHits.length>0){
      for(let i=this.attackHits.length-1;i>=0;i--){
        const a=this.attackHits[i];a.t-=dt;if(a.t<=0)this.attackHits.splice(i,1);
        else{
          for(const en of this.enemies){if(en.alive){const d=Math.hypot(en.x-a.x,en.y-a.y);if(d<a.range){en.hp-=a.damage;if(en.hp<=0){en.alive=false;this.score+=50;}}}}
          if(this.boss&&this.boss.alive){const d=Math.hypot(this.boss.x-a.x,this.boss.y-a.y);if(d<a.range){this.boss.hp-=a.damage;if(this.boss.hp<=0){this.boss.alive=false;this.score+=500;this.prepareNextWave();}}}
        }
      }
    }
    // collisions
    for(const en of this.enemies){if(en.alive){if(Math.hypot(en.x-this.player.x,en.y-this.player.y)<en.radius+this.player.radius){if(!this.player.inv){this.lives--;this.player.inv=true;this.player.invTimer=0.8;if(this.lives<=0)this.gameOver();}}}}
    if(this.boss&&this.boss.alive){if(Math.hypot(this.boss.x-this.player.x,this.boss.y-this.player.y)<this.boss.radius+this.player.radius){if(!this.player.inv){this.lives--;this.player.inv=true;this.player.invTimer=0.8;if(this.lives<=0)this.gameOver();}}}
    updateHUD();
  }
  prepareNextWave(){this.player.power++;this.wave++;this.enemies=[];this.boss=null;this.enemyCount=0;this.spawnTimer=1;}
  render(){
    ctx.fillStyle='#000';ctx.fillRect(0,0,c.width,c.height);
    ctx.fillStyle='#111';ctx.fillRect(0,c.height-40,c.width,40);
    if(this.boss&&this.boss.alive){
      const bw=360,bh=14,x=(c.width-bw)/2,y=18;
      ctx.fillStyle='#222';ctx.fillRect(x-2,y-2,bw+4,bh+4);
      ctx.fillStyle='#111';ctx.fillRect(x,y,bw,bh);
      ctx.fillStyle='#fff';ctx.fillRect(x,y,bw*(this.boss.hp/this.boss.maxhp),bh);
      ctx.fillStyle='#fff';ctx.font='14px sans-serif';ctx.textAlign='center';ctx.fillText('BOSS',c.width/2,y-6);
    }
    this.player.render(ctx);
    this.enemies.forEach(e=>e.render(ctx));
    if(this.boss&&this.boss.alive)this.boss.render(ctx);
  }
  playerAttack(){const atk=this.player.attack();if(atk){this.attackHits.push({x:atk.x,y:atk.y,range:atk.range,damage:atk.damage,t:0.12});}}
  playerDash(){this.player.dash();}
  gameOver(){this.playing=false;alert('Game Over! Score: '+this.score);}
}

// Setup canvas & HUD
const c=document.getElementById('c');const ctx=c.getContext('2d');
function updateHUD(){
  document.getElementById('score').textContent=game.score;
  document.getElementById('lives').textContent=game.lives;
  document.getElementById('wave').textContent=game.wave;
  document.getElementById('power').textContent=game.player.power;
}
window.addEventListener('load',()=>{window.game=new Game();updateHUD();});

// Keyboard shortcuts
window.addEventListener('keydown', e=>{
  if(e.key.toLowerCase()==='z'){game.playerAttack();}
  if(e.key.toLowerCase()==='x'){game.playerDash();}
  if(e.key.toLowerCase()==='p'){game.paused=!game.paused;}
});

</script>
</body>
</html>
