<!DOCTYPE html><html lang="id">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Arena Survival | Terminal Gabut</title>  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">  
  <script src="https://cdn.tailwindcss.com"></script>  
</head>  
<body class="bg-gray-100 flex flex-col min-h-screen">    <!-- NAVBAR -->    <header class="bg-blue-600 text-white fixed top-0 left-0 w-full shadow-md z-50">  
    <nav class="flex justify-between items-center bg-blue-600 text-white px-6 py-4 shadow-md">  
      <div>  
        <a href="../index.html">  
          <img src="IMG_20250825_090756-removebg-preview.png" alt="Terminal Gabut Logo" class="h-7 w-auto">  
        </a>  
      </div>  
      <ul class="hidden md:flex gap-6">  
        <li><a href="../index.html" class="hover:text-blue-200">Home</a></li>  
        <li><a href="#" class="hover:text-blue-200">Fitur</a></li>  
      </ul>  
      <button id="darkToggle" class="bg-white text-blue-600 px-3 py-1 rounded-md hover:bg-gray-200">🌙</button>  
    </nav>  
  </header>    <!-- CONTAINER -->    <div class="chat-container w-11/12 max-w-4xl mx-auto flex flex-col bg-white rounded-xl shadow-md mt-24 overflow-hidden">  <!-- HEADER: Score/Lives/Wave/Power -->  
<div class="header-container bg-blue-600 text-white flex justify-around p-4">  
  <div><strong>Score:</strong> <span id="score">0</span></div>  
  <div><strong>Lives:</strong> <span id="lives">3</span></div>  
  <div><strong>Wave:</strong> <span id="wave">1</span></div>  
  <div><strong>Power:</strong> <span id="power">1</span></div>  
</div>  

<!-- GAME AREA -->
<div class="messages flex items-center justify-center bg-gray-50" style="height:600px">  
  <canvas id="c" class="bg-black rounded border-2 border-blue-500" width="800" height="420"></canvas>  
</div>  

<!-- GAMEPAD -->  
<div class="input-container flex flex-col items-center bg-white p-4 gap-3">  
  <div class="flex justify-center gap-6">  
    <button class="px-4 py-2 bg-blue-600 text-white rounded" onclick="keys['arrowleft']=true;setTimeout(()=>keys['arrowleft']=false,200)">&#9664;</button>  
    <button class="px-4 py-2 bg-blue-600 text-white rounded" onclick="keys['arrowup']=true;setTimeout(()=>keys['arrowup']=false,200)">&#9650;</button>  
    <button class="px-4 py-2 bg-blue-600 text-white rounded" onclick="keys['arrowdown']=true;setTimeout(()=>keys['arrowdown']=false,200)">&#9660;</button>  
    <button class="px-4 py-2 bg-blue-600 text-white rounded" onclick="keys['arrowright']=true;setTimeout(()=>keys['arrowright']=false,200)">&#9654;</button>  
  </div>  
  <div class="flex gap-6">  
    <button class="px-6 py-2 bg-green-500 text-white rounded" onclick="game.start()" id="startBtn">▶ Start Game</button>  
    <button class="px-6 py-2 bg-orange-500 text-white rounded" onclick="game.playerAttack()">⚔️ Attack (Z)</button>  
    <button class="px-6 py-2 bg-red-500 text-white rounded" onclick="game.playerDash()">💨 Skill (X)</button>  
  </div>  
</div>

  </div>   
 <footer class="text-center py-6 text-gray-500">© 2025 Terminal Gabut - Semua Hak Dilindungi</footer>

<script>
// === Arena Survival pakai Sprite ===

// Global
window.keys = {};
window.game = null;

// Input
window.addEventListener('keydown', e=>{
  keys[e.key.toLowerCase()] = true;
  if (["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)) e.preventDefault();
});
window.addEventListener('keyup', e=>{ keys[e.key.toLowerCase()] = false; });

// Utility
function clamp(v,a,b){return Math.max(a,Math.min(b,v));}
function rnd(a,b){return Math.random()*(b-a)+a;}

// Player
class Player {
  constructor(x,y){
    this.x=x;this.y=y;
    this.hp=3;this.power=1;
    this.speed=200;
    this.attackCooldown=0;this.dashCooldown=0;
    this.inv=false;this.invTimer=0;
    this.img=new Image();
    this.img.src="hero.png"; // file hero.png
    this.width=64;this.height=64;
  }
  update(dt){
    let vx=0,vy=0;
    if(keys['arrowleft']||keys['a']) vx=-1;
    if(keys['arrowright']||keys['d']) vx=1;
    if(keys['arrowup']||keys['w']) vy=-1;
    if(keys['arrowdown']||keys['s']) vy=1;
    if(vx||vy){
      const len=Math.hypot(vx,vy)||1;vx/=len;vy/=len;
      this.x+=vx*this.speed*dt;this.y+=vy*this.speed*dt;
      this.x=clamp(this.x,0,c.width-this.width);
      this.y=clamp(this.y,60,c.height-this.height);
    }
    if(this.attackCooldown>0)this.attackCooldown-=dt;
    if(this.dashCooldown>0)this.dashCooldown-=dt;
    if(this.invTimer>0){this.invTimer-=dt;if(this.invTimer<=0)this.inv=false;}
  }
  render(ctx){
    if(this.inv){ctx.globalAlpha=0.6;}
    ctx.drawImage(this.img,this.x,this.y,this.width,this.height);
    ctx.globalAlpha=1;
  }
  attack(){
    if(this.attackCooldown>0)return null;
    this.attackCooldown=0.4;
    return {x:this.x+this.width/2,y:this.y+this.height/2,range:60,damage:1+this.power};
  }
  dash(){
    if(this.dashCooldown>0)return;
    this.dashCooldown=2;
    this.inv=true;this.invTimer=0.3;
    if(keys['arrowleft']) this.x-=80;
    if(keys['arrowright']) this.x+=80;
  }
}

// Enemy
class Enemy {
  constructor(side,y,hp,speed){
    this.x=side==='left'? -60 : c.width+60;
    this.y=y;this.hp=hp;this.speed=speed;this.alive=true;
    this.img=new Image();this.img.src="enemy.png";
    this.width=50;this.height=50;
    this.dir = side==='left'?1:-1;
  }
  update(dt,player){
    if(!this.alive)return;
    this.x+=this.dir*this.speed*dt;
    // arahkan ke player
    if(player.x>this.x) this.x+=this.speed*dt*0.2;
    if(player.x<this.x) this.x-=this.speed*dt*0.2;
  }
  render(ctx){
    if(!this.alive)return;
    ctx.drawImage(this.img,this.x,this.y,this.width,this.height);
  }
}

// Boss
class Boss extends Enemy{
  constructor(wave){
    super('left',c.height-140,20+wave*10,80);
    this.img=new Image();this.img.src="boss.png"; // opsional
    this.width=100;this.height=100;
    this.maxhp=this.hp;
  }
  render(ctx){
    if(!this.alive)return;
    ctx.drawImage(this.img,this.x,this.y,this.width,this.height);
  }
}

// Game
class Game {
  constructor(){
    this.player=new Player(c.width/2,c.height-120);
    this.enemies=[];this.boss=null;
    this.wave=1;this.lives=3;this.score=0;
    this.attackHits=[];this.lastTime=performance.now();
    this.playing=false;
  }
  start(){if(this.playing)return;this.reset();this.playing=true;this.loop();}
  reset(){this.player=new Player(c.width/2,c.height-120);
    this.enemies=[];this.boss=null;this.wave=1;this.lives=3;this.score=0;updateHUD();}
  loop(){
    if(!this.playing)return;
    const now=performance.now();const dt=(now-this.lastTime)/1000;this.lastTime=now;
    this.update(dt);this.render();
    requestAnimationFrame(()=>this.loop());
  }
  update(dt){
    this.player.update(dt);
    // spawn enemies
    if(this.enemies.length<10 && !this.boss){
      if(Math.random()<0.02){
        const side=Math.random()<0.5?'left':'right';
        this.enemies.push(new Enemy(side,c.height-120,2+this.wave,60+this.wave*5));
      }
    }
    this.enemies.forEach(e=>e.update(dt,this.player));
    // boss spawn
    if(this.enemies.filter(e=>e.alive).length===0 && this.enemies.length>=10 && !this.boss){
      this.boss=new Boss(this.wave);
    }
    if(this.boss) this.boss.update(dt,this.player);

    // serangan
    for(let i=this.attackHits.length-1;i>=0;i--){
      const a=this.attackHits[i];a.t-=dt;
      if(a.t<=0)this.attackHits.splice(i,1);
      else{
        this.enemies.forEach(en=>{
          if(en.alive){
            const d=Math.hypot(en.x-a.x,en.y-a.y);
            if(d<a.range){en.hp-=a.damage;if(en.hp<=0){en.alive=false;this.score+=50;}}
          }
        });
        if(this.boss && this.boss.alive){
          const d=Math.hypot(this.boss.x-a.x,this.boss.y-a.y);
          if(d<a.range){this.boss.hp-=a.damage;if(this.boss.hp<=0){this.score+=500;this.wave++;this.player.power++;this.boss=null;this.enemies=[];}}
        }
      }
    }
    updateHUD();
  }
  render(){
    ctx.fillStyle="#000";ctx.fillRect(0,0,c.width,c.height);
    // ground
    ctx.fillStyle="#111";ctx.fillRect(0,c.height-40,c.width,40);
    this.player.render(ctx);
    this.enemies.forEach(e=>e.render(ctx));
    if(this.boss) this.boss.render(ctx);
    // boss HP bar
    if(this.boss && this.boss.alive){
      const bw=300,bh=14,x=(c.width-bw)/2,y=20;
      ctx.fillStyle="#333";ctx.fillRect(x-2,y-2,bw+4,bh+4);
      ctx.fillStyle="#111";ctx.fillRect(x,y,bw,bh);
      ctx.fillStyle="#f00";ctx.fillRect(x,y,bw*(this.boss.hp/this.boss.maxhp),bh);
    }
    // slash effect
    this.attackHits.forEach(a=>{
      ctx.strokeStyle="rgba(255,0,0,0.6)";
      ctx.lineWidth=6;
      ctx.beginPath();
      ctx.arc(a.x,a.y,a.range,0,Math.PI/2);
      ctx.stroke();
    });
  }
  playerAttack(){
    const atk=this.player.attack();
    if(atk){this.attackHits.push({x:atk.x,y:atk.y,range:atk.range,damage:atk.damage,t:0.15});}
  }
  playerDash(){this.player.dash();}
}

// Canvas & HUD
const c=document.getElementById('c');const ctx=c.getContext('2d');
function updateHUD(){
  document.getElementById('score').textContent=game.score;
  document.getElementById('lives').textContent=game.lives;
  document.getElementById('wave').textContent=game.wave;
  document.getElementById('power').textContent=game.player.power;
}
window.addEventListener('load',()=>{window.game=new Game();updateHUD();});

// Keyboard attack/skill
window.addEventListener('keydown',e=>{
  if(e.key.toLowerCase()==='z'){game.playerAttack();}
  if(e.key.toLowerCase()==='x'){game.playerDash();}
});
</script>

</script>
</body>
</html>
